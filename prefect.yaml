# Welcome to your prefect.yaml file! You can use this file for storing and managing
# configuration for deploying your flows. We recommend committing this file to source
# control along with your flow code.

# Generic metadata about this project
name: ML-Flows
prefect-version: 3.4.3

# build section allows you to manage and build docker images
build: null

# push section allows you to manage if and how this project is uploaded to remote locations
push: null
# push:
# - prefect_aws.deployments.steps.push_to_s3:
#     id: push_code
#     requires: prefect-aws>=0.3.4
#     bucket: practicl-flows
#     folder: ML-Flows

# pull section allows you to provide instructions for cloning this project in remote locations
pull:
  - prefect.deployments.steps.set_working_directory:
      directory: '/app'

# - prefect_aws.deployments.steps.pull_from_s3:
#     id: pull_code
#     requires: prefect-aws>=0.3.4
#     bucket: '{{ push_code.bucket }}'
#     folder: '{{ push_code.folder }}'

# the deployments section allows you to provide configuration for deploying flows
deployments:
- name: fargate-dummy
  version: "0.1.0"
  tags: ["fargate", "dummy", "test"]
  description: "Dummy flow for testing Fargate deployments"
  schedule: {}
  flow_name: hello
  entrypoint: /app/flows/examples/hello_flow.py:hello
  parameters: {}
  work_pool:
    name: my-ecs-pool
    work_queue_name: null
    job_variables:
      task_definition_arn: "arn:aws:ecs:eu-central-1:677276117552:task-definition/prefect-fargate-task"
      env:
        AWS_DEFAULT_REGION: eu-central-1
